<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HL Liquidation Hunter | High-Risk Position Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a24;
      --bg-card: #15151f;
      --border: #2a2a3a;
      --text-primary: #e4e4e7;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --accent-green: #22c55e;
      --accent-green-dim: #16a34a;
      --accent-red: #ef4444;
      --accent-red-dim: #dc2626;
      --accent-yellow: #eab308;
      --accent-yellow-dim: #ca8a04;
      --accent-blue: #3b82f6;
      --accent-cyan: #06b6d4;
      --accent-purple: #8b5cf6;
      --gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      --gradient-warning: linear-gradient(135deg, #eab308 0%, #ca8a04 100%);
      --glow-red: 0 0 20px rgba(239, 68, 68, 0.3);
      --glow-yellow: 0 0 20px rgba(234, 179, 8, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Scanline effect */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
      );
      z-index: 1000;
    }

    /* Header */
    .header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: var(--gradient-danger);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .logo-text {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .logo-text span {
      color: var(--accent-red);
    }

    .status-bar {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-green);
      animation: blink 1s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Main container */
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Stats grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-blue);
    }

    .stat-card.critical::before {
      background: var(--gradient-danger);
    }

    .stat-card.warning::before {
      background: var(--gradient-warning);
    }

    .stat-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .stat-value {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .stat-value.critical {
      color: var(--accent-red);
    }

    .stat-value.warning {
      color: var(--accent-yellow);
    }

    .stat-subtext {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    /* Filters */
    .filters {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      display: flex;
      gap: 1.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .filter-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
    }

    .filter-input {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem 1rem;
      color: var(--text-primary);
      font-family: inherit;
      font-size: 0.875rem;
      outline: none;
      transition: border-color 0.2s;
    }

    .filter-input:focus {
      border-color: var(--accent-blue);
    }

    .filter-input::placeholder {
      color: var(--text-muted);
    }

    select.filter-input {
      cursor: pointer;
      min-width: 150px;
    }

    .btn {
      background: var(--accent-blue);
      border: none;
      border-radius: 6px;
      padding: 0.5rem 1.5rem;
      color: white;
      font-family: inherit;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .btn-danger {
      background: var(--accent-red);
    }

    .btn-danger:hover {
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    /* Positions table */
    .positions-section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }

    .section-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .section-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title .icon {
      font-size: 1.25rem;
    }

    .positions-table {
      width: 100%;
      border-collapse: collapse;
    }

    .positions-table th {
      background: var(--bg-tertiary);
      padding: 0.75rem 1rem;
      text-align: left;
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      font-weight: 500;
      border-bottom: 1px solid var(--border);
    }

    .positions-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      font-size: 0.875rem;
    }

    .positions-table tr:hover {
      background: var(--bg-tertiary);
    }

    .positions-table tr.critical-row {
      background: rgba(239, 68, 68, 0.05);
      animation: criticalPulse 2s ease-in-out infinite;
    }

    @keyframes criticalPulse {
      0%, 100% { background: rgba(239, 68, 68, 0.05); }
      50% { background: rgba(239, 68, 68, 0.1); }
    }

    .positions-table tr.warning-row {
      background: rgba(234, 179, 8, 0.03);
    }

    /* Cell styles */
    .address-cell {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
    }

    .address-cell a {
      color: var(--accent-cyan);
      text-decoration: none;
    }

    .address-cell a:hover {
      text-decoration: underline;
    }

    .coin-cell {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
    }

    .direction-badge {
      font-size: 0.65rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-weight: 600;
    }

    .direction-badge.long {
      background: rgba(34, 197, 94, 0.2);
      color: var(--accent-green);
    }

    .direction-badge.short {
      background: rgba(239, 68, 68, 0.2);
      color: var(--accent-red);
    }

    .value-cell {
      font-weight: 500;
    }

    .price-cell {
      color: var(--text-secondary);
      font-size: 0.8rem;
    }

    .danger-cell {
      font-weight: 700;
    }

    .danger-cell.critical {
      color: var(--accent-red);
    }

    .danger-cell.warning {
      color: var(--accent-yellow);
    }

    .danger-badge {
      font-size: 0.6rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .danger-badge.critical {
      background: var(--gradient-danger);
      color: white;
      box-shadow: var(--glow-red);
    }

    .danger-badge.warning {
      background: var(--gradient-warning);
      color: black;
      box-shadow: var(--glow-yellow);
    }

    .new-badge {
      font-size: 0.55rem;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
      color: white;
      animation: newPulse 1.5s ease-in-out infinite;
      margin-left: 0.5rem;
    }

    @keyframes newPulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    /* Whale type badges */
    .whale-badge {
      font-size: 0.55rem;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      font-weight: 600;
      margin-left: 0.5rem;
    }

    .whale-badge.profitable {
      background: rgba(34, 197, 94, 0.2);
      color: var(--accent-green);
      border: 1px solid var(--accent-green);
    }

    .whale-badge.losing {
      background: rgba(239, 68, 68, 0.2);
      color: var(--accent-red);
      border: 1px solid var(--accent-red);
    }

    .total-pnl {
      font-size: 0.65rem;
      margin-top: 0.25rem;
    }

    .total-pnl.positive {
      color: var(--accent-green);
    }

    .total-pnl.negative {
      color: var(--accent-red);
    }

    .insider-alert {
      background: rgba(139, 92, 246, 0.1);
      border: 1px dashed var(--accent-purple);
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      font-size: 0.65rem;
      color: var(--accent-purple);
      margin-top: 0.25rem;
    }

    /* Wallet Info */
    .wallet-info {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .wallet-stat {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .wallet-stat .label {
      color: var(--text-muted);
    }

    .wallet-stat .value {
      color: var(--accent-cyan);
      font-weight: 600;
    }

    /* Other Positions Expandable */
    .other-positions-toggle {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      font-size: 0.65rem;
      color: var(--accent-blue);
      cursor: pointer;
      margin-top: 0.5rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      transition: all 0.2s;
    }

    .other-positions-toggle:hover {
      background: var(--accent-blue);
      color: white;
    }

    .other-positions-container {
      display: none;
      margin-top: 0.5rem;
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-radius: 6px;
      border: 1px solid var(--border);
    }

    .other-positions-container.expanded {
      display: block;
      animation: slideDown 0.2s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .other-position-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem;
      border-bottom: 1px solid var(--border);
      font-size: 0.75rem;
    }

    .other-position-item:last-child {
      border-bottom: none;
    }

    .other-pos-coin {
      font-weight: 600;
      color: var(--text-primary);
      min-width: 60px;
    }

    .other-pos-direction {
      font-size: 0.6rem;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
    }

    .other-pos-direction.long {
      background: rgba(34, 197, 94, 0.2);
      color: var(--accent-green);
    }

    .other-pos-direction.short {
      background: rgba(239, 68, 68, 0.2);
      color: var(--accent-red);
    }

    .other-pos-size {
      color: var(--text-secondary);
    }

    .other-pos-pnl {
      font-weight: 500;
    }

    .other-pos-pnl.positive {
      color: var(--accent-green);
    }

    .other-pos-pnl.negative {
      color: var(--accent-red);
    }

    /* Position count badge */
    .position-count-badge {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.15rem 0.5rem;
      font-size: 0.6rem;
      color: var(--text-muted);
      margin-left: 0.5rem;
    }

    /* Main layout - two columns */
    .main-content {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 1.5rem;
    }

    @media (max-width: 1400px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    /* Positions split layout */
    .positions-split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    @media (max-width: 1200px) {
      .positions-split {
        grid-template-columns: 1fr;
      }
    }

    .position-column {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }

    .position-column.longs {
      border-top: 3px solid var(--accent-green);
    }

    .position-column.shorts {
      border-top: 3px solid var(--accent-red);
    }

    .column-header {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border);
      background: var(--bg-tertiary);
    }

    .column-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .column-title.longs {
      color: var(--accent-green);
    }

    .column-title.shorts {
      color: var(--accent-red);
    }

    .column-stats {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
      font-size: 0.7rem;
    }

    .column-stat {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .column-stat .label {
      color: var(--text-muted);
    }

    .column-stat .value {
      font-weight: 600;
    }

    .column-stat .value.green {
      color: var(--accent-green);
    }

    .column-stat .value.red {
      color: var(--accent-red);
    }

    .position-list {
      max-height: 600px;
      overflow-y: auto;
    }

    .position-card {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      transition: background 0.2s;
    }

    .position-card:hover {
      background: var(--bg-tertiary);
    }

    .position-card.critical {
      background: rgba(239, 68, 68, 0.05);
      border-left: 3px solid var(--accent-red);
    }

    .position-card.warning {
      background: rgba(234, 179, 8, 0.03);
      border-left: 3px solid var(--accent-yellow);
    }

    .position-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.5rem;
    }

    .position-address {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.25rem;
    }

    .position-address a {
      color: var(--accent-cyan);
      text-decoration: none;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
    }

    .position-address a:hover {
      text-decoration: underline;
    }

    .position-coin {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .position-middle {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      margin: 0.75rem 0;
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-radius: 6px;
    }

    .position-stat {
      text-align: center;
    }

    .position-stat-label {
      font-size: 0.6rem;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.05em;
    }

    .position-stat-value {
      font-size: 0.9rem;
      font-weight: 600;
      margin-top: 0.15rem;
    }

    .position-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.75rem;
    }

    .position-prices {
      display: flex;
      gap: 1rem;
      color: var(--text-muted);
    }

    .position-prices span {
      display: flex;
      gap: 0.25rem;
    }

    .empty-column {
      padding: 2rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    /* Liquidations Panel */
    .liq-panel {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      height: fit-content;
      max-height: calc(100vh - 200px);
      position: sticky;
      top: 100px;
    }

    .liq-header {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--bg-tertiary);
    }

    .liq-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .liq-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      background: var(--bg-secondary);
    }

    .liq-stat {
      text-align: center;
      padding: 0.5rem;
      border-radius: 6px;
      background: var(--bg-tertiary);
    }

    .liq-stat.longs {
      border-left: 3px solid var(--accent-green);
    }

    .liq-stat.shorts {
      border-left: 3px solid var(--accent-red);
    }

    .liq-stat-label {
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
    }

    .liq-stat-value {
      font-size: 1rem;
      font-weight: 700;
      margin-top: 0.25rem;
    }

    .liq-stat.longs .liq-stat-value {
      color: var(--accent-green);
    }

    .liq-stat.shorts .liq-stat-value {
      color: var(--accent-red);
    }

    .liq-filters {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .liq-filter-btn {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      font-size: 0.65rem;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .liq-filter-btn:hover,
    .liq-filter-btn.active {
      background: var(--accent-blue);
      border-color: var(--accent-blue);
      color: white;
    }

    .liq-list {
      max-height: 500px;
      overflow-y: auto;
    }

    .liq-item {
      display: flex;
      align-items: center;
      padding: 0.6rem 1rem;
      border-bottom: 1px solid var(--border);
      gap: 0.75rem;
      transition: background 0.2s;
      animation: slideInLiq 0.3s ease;
    }

    @keyframes slideInLiq {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .liq-item:hover {
      background: var(--bg-tertiary);
    }

    .liq-side {
      width: 4px;
      height: 36px;
      border-radius: 2px;
    }

    .liq-side.long {
      background: var(--accent-green);
    }

    .liq-side.short {
      background: var(--accent-red);
    }

    .liq-info {
      flex: 1;
      min-width: 0;
    }

    .liq-coin {
      font-weight: 600;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .liq-direction {
      font-size: 0.55rem;
      padding: 0.1rem 0.3rem;
      border-radius: 3px;
      font-weight: 600;
    }

    .liq-direction.long {
      background: rgba(34, 197, 94, 0.2);
      color: var(--accent-green);
    }

    .liq-direction.short {
      background: rgba(239, 68, 68, 0.2);
      color: var(--accent-red);
    }

    .liq-details {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .liq-value {
      text-align: right;
    }

    .liq-amount {
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--text-primary);
    }

    .liq-time {
      font-size: 0.6rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .liq-empty {
      padding: 2rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    /* Whale Liquidations Section */
    .whale-liq-section {
      border-top: 2px solid var(--border);
      margin-top: 0.5rem;
    }

    .whale-liq-header {
      padding: 0.75rem 1rem;
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(239, 68, 68, 0.1) 100%);
      font-size: 0.8rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--accent-purple);
      border-bottom: 1px solid var(--border);
    }

    .whale-liq-list {
      max-height: 200px;
      overflow-y: auto;
    }

    .whale-liq-item {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      gap: 0.75rem;
      background: linear-gradient(90deg, rgba(139, 92, 246, 0.05) 0%, transparent 100%);
      animation: whaleSlide 0.5s ease;
    }

    @keyframes whaleSlide {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .whale-liq-item .liq-amount {
      font-size: 1rem;
      color: var(--accent-purple);
    }

    .leverage-cell {
      color: var(--accent-purple);
      font-weight: 600;
    }

    .pnl-cell.positive {
      color: var(--accent-green);
    }

    .pnl-cell.negative {
      color: var(--accent-red);
    }

    /* Distance bar */
    .distance-bar {
      width: 100%;
      height: 6px;
      background: var(--bg-tertiary);
      border-radius: 3px;
      overflow: hidden;
      margin-top: 0.25rem;
    }

    .distance-fill {
      height: 100%;
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .distance-fill.critical {
      background: var(--gradient-danger);
    }

    .distance-fill.warning {
      background: var(--gradient-warning);
    }

    /* Empty state */
    .empty-state {
      padding: 4rem 2rem;
      text-align: center;
      color: var(--text-muted);
    }

    .empty-state .icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    /* Loading */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      gap: 0.5rem;
      color: var(--text-muted);
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Modal for adding address */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 2rem;
      width: 100%;
      max-width: 500px;
      transform: translateY(20px);
      transition: transform 0.3s;
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .modal-input {
      width: 100%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.75rem 1rem;
      color: var(--text-primary);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
      margin-bottom: 1rem;
      outline: none;
    }

    .modal-input:focus {
      border-color: var(--accent-blue);
    }

    .modal-buttons {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-secondary);
    }

    .btn-ghost:hover {
      background: var(--bg-tertiary);
      box-shadow: none;
      transform: none;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 1rem;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
      }

      .positions-table {
        font-size: 0.75rem;
      }

      .positions-table th,
      .positions-table td {
        padding: 0.5rem;
      }
    }

    /* Toast notifications */
    .toast-container {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 1001;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .toast {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: slideIn 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .toast.critical {
      border-left: 3px solid var(--accent-red);
    }

    .toast.warning {
      border-left: 3px solid var(--accent-yellow);
    }

    .toast.info {
      border-left: 3px solid var(--accent-blue);
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <div class="logo-icon">üéØ</div>
      <div class="logo-text">HL <span>LIQ</span> HUNTER</div>
    </div>
    <div class="status-bar">
      <div class="status-item">
        <div class="status-dot"></div>
        <span>LIVE</span>
      </div>
      <div class="status-item">
        <span id="lastUpdate">Loading...</span>
      </div>
      <div class="status-item">
        <span id="addressCount">0</span> addresses tracked
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card critical">
        <div class="stat-label">Critical (&lt;5%)</div>
        <div class="stat-value critical" id="criticalCount">0</div>
        <div class="stat-subtext">Near liquidation</div>
      </div>
      <div class="stat-card warning">
        <div class="stat-label">Warning (5-10%)</div>
        <div class="stat-value warning" id="warningCount">0</div>
        <div class="stat-subtext">At risk</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total Value at Risk</div>
        <div class="stat-value" id="totalValue">$0</div>
        <div class="stat-subtext">Combined position size</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Positions Tracked</div>
        <div class="stat-value" id="totalPositions">0</div>
        <div class="stat-subtext">$2M+ positions</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="filter-group">
        <label class="filter-label">Min Position Size</label>
        <select class="filter-input" id="minSizeFilter">
          <option value="2000000">$2M+</option>
          <option value="5000000">$5M+</option>
          <option value="10000000">$10M+</option>
          <option value="20000000">$20M+</option>
          <option value="50000000">$50M+</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">Max Distance to Liq</label>
        <select class="filter-input" id="maxDistanceFilter">
          <option value="10">10%</option>
          <option value="5">5%</option>
          <option value="3">3%</option>
          <option value="2">2%</option>
          <option value="1">1%</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">Danger Level</label>
        <select class="filter-input" id="dangerFilter">
          <option value="">All</option>
          <option value="CRITICAL">Critical Only</option>
          <option value="WARNING">Warning Only</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">Coin</label>
        <select class="filter-input" id="coinFilter">
          <option value="">All Coins</option>
        </select>
      </div>
      <div style="flex-grow: 1;"></div>
      <button class="btn" onclick="openAddressModal()">+ Add Address</button>
      <button class="btn btn-danger" onclick="refreshData()">‚Üª Refresh</button>
    </div>

    <!-- Main Content: Positions + Liquidations -->
    <div class="main-content">
      <!-- Positions Split: Longs | Shorts -->
      <div class="positions-split">
        <!-- LONGS Column -->
        <div class="position-column longs">
          <div class="column-header">
            <div class="column-title longs">
              üü¢ LONGS AT RISK
            </div>
            <div class="column-stats">
              <div class="column-stat">
                <span class="label">Total:</span>
                <span class="value green" id="longsAtRisk">$0</span>
              </div>
              <div class="column-stat">
                <span class="label">Count:</span>
                <span class="value" id="longsCount">0</span>
              </div>
            </div>
          </div>
          <div class="position-list" id="longsList">
            <div class="empty-column">No longs at risk</div>
          </div>
        </div>

        <!-- SHORTS Column -->
        <div class="position-column shorts">
          <div class="column-header">
            <div class="column-title shorts">
              üî¥ SHORTS AT RISK
            </div>
            <div class="column-stats">
              <div class="column-stat">
                <span class="label">Total:</span>
                <span class="value red" id="shortsAtRisk">$0</span>
              </div>
              <div class="column-stat">
                <span class="label">Count:</span>
                <span class="value" id="shortsCount">0</span>
              </div>
            </div>
          </div>
          <div class="position-list" id="shortsList">
            <div class="empty-column">No shorts at risk</div>
          </div>
        </div>
      </div>

      <!-- Recent Liquidations Panel -->
      <div class="liq-panel">
        <div class="liq-header">
          <div class="liq-title">
            <span>üíÄ</span>
            Recent Liquidations
          </div>
        </div>
        <div class="liq-stats">
          <div class="liq-stat longs">
            <div class="liq-stat-label">Longs Liq'd</div>
            <div class="liq-stat-value" id="liqLongValue">$0</div>
          </div>
          <div class="liq-stat shorts">
            <div class="liq-stat-label">Shorts Liq'd</div>
            <div class="liq-stat-value" id="liqShortValue">$0</div>
          </div>
        </div>
        <div class="liq-filters">
          <button class="liq-filter-btn active" data-filter="all">All</button>
          <button class="liq-filter-btn" data-filter="10000">$10K+</button>
          <button class="liq-filter-btn" data-filter="50000">$50K+</button>
          <button class="liq-filter-btn" data-filter="100000">$100K+</button>
        </div>
        <div class="liq-list" id="liqList">
          <div class="liq-empty">Waiting for liquidations...</div>
        </div>
        
        <!-- Whale Liquidations Section -->
        <div class="whale-liq-section">
          <div class="whale-liq-header">
            <span>üêãüíÄ</span>
            Whale Liquidations ($500K+)
          </div>
          <div class="whale-liq-list" id="whaleLiqList">
            <div class="liq-empty">No whale liquidations yet...</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Add Address Modal -->
  <div class="modal-overlay" id="addressModal">
    <div class="modal">
      <div class="modal-title">Track New Address</div>
      <input type="text" class="modal-input" id="newAddress" placeholder="0x..." />
      <div class="modal-buttons">
        <button class="btn btn-ghost" onclick="closeAddressModal()">Cancel</button>
        <button class="btn" onclick="addAddress()">Add Address</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script>
    let positions = [];
    let previousPositions = new Map();

    // Format numbers
    function formatUSD(value) {
      if (value >= 1000000000) return '$' + (value / 1000000000).toFixed(2) + 'B';
      if (value >= 1000000) return '$' + (value / 1000000).toFixed(2) + 'M';
      if (value >= 1000) return '$' + (value / 1000).toFixed(1) + 'K';
      return '$' + value.toFixed(2);
    }

    function formatPrice(value) {
      if (value >= 1000) return value.toLocaleString('en-US', { maximumFractionDigits: 2 });
      if (value >= 1) return value.toFixed(4);
      return value.toPrecision(4);
    }

    // Fetch data from API
    async function fetchPositions() {
      const minSize = document.getElementById('minSizeFilter').value;
      const maxDistance = document.getElementById('maxDistanceFilter').value;
      const dangerLevel = document.getElementById('dangerFilter').value;

      let url = `/api/positions?minSize=${minSize}&maxDistance=${maxDistance}`;
      if (dangerLevel) url += `&dangerLevel=${dangerLevel}`;

      try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Error fetching positions:', error);
        return { positions: [], count: 0 };
      }
    }

    async function fetchStats() {
      try {
        const response = await fetch('/api/stats');
        return await response.json();
      } catch (error) {
        console.error('Error fetching stats:', error);
        return null;
      }
    }

    // Update UI
    function updateStats(stats) {
      if (!stats) return;

      document.getElementById('criticalCount').textContent = stats.criticalCount;
      document.getElementById('warningCount').textContent = stats.warningCount;
      document.getElementById('totalValue').textContent = formatUSD(stats.totalValueAtRisk);
      document.getElementById('totalPositions').textContent = stats.totalPositions;
      document.getElementById('addressCount').textContent = stats.addressesTracked;

      // Update last update time
      const now = new Date();
      document.getElementById('lastUpdate').textContent = 
        `Updated: ${now.toLocaleTimeString()}`;

      // Update coin filter
      const coinFilter = document.getElementById('coinFilter');
      const currentValue = coinFilter.value;
      const coins = Object.keys(stats.byCoin || {}).sort();
      
      if (coins.length > 0) {
        coinFilter.innerHTML = '<option value="">All Coins</option>' + 
          coins.map(c => `<option value="${c}">${c}</option>`).join('');
        coinFilter.value = currentValue;
      }
    }

    function renderPositions(data) {
      const coinFilter = document.getElementById('coinFilter').value;

      let longs = data.longs || [];
      let shorts = data.shorts || [];
      
      if (coinFilter) {
        longs = longs.filter(p => p.coin === coinFilter);
        shorts = shorts.filter(p => p.coin === coinFilter);
      }

      // Update totals
      document.getElementById('longsAtRisk').textContent = formatUSD(data.longsAtRisk || 0);
      document.getElementById('shortsAtRisk').textContent = formatUSD(data.shortsAtRisk || 0);
      document.getElementById('longsCount').textContent = longs.length;
      document.getElementById('shortsCount').textContent = shorts.length;

      // Render longs
      const longsList = document.getElementById('longsList');
      if (longs.length === 0) {
        longsList.innerHTML = '<div class="empty-column">üü¢ No longs at risk</div>';
      } else {
        longsList.innerHTML = longs.map((pos, idx) => renderPositionCard(pos, idx, 'long')).join('');
      }

      // Render shorts
      const shortsList = document.getElementById('shortsList');
      if (shorts.length === 0) {
        shortsList.innerHTML = '<div class="empty-column">üî¥ No shorts at risk</div>';
      } else {
        shortsList.innerHTML = shorts.map((pos, idx) => renderPositionCard(pos, idx + 1000, 'short')).join('');
      }

      // Check for new critical positions (for toasts)
      [...longs, ...shorts].forEach(pos => {
        const key = `${pos.user}-${pos.coin}`;
        const prev = previousPositions.get(key);
        
        if (!prev && pos.dangerLevel === 'CRITICAL') {
          showToast(`üö® New CRITICAL: ${pos.coin} ${pos.direction} ${formatUSD(pos.positionUSD)} @ ${pos.distancePercent}%`, 'critical');
        } else if (prev && prev.dangerLevel === 'WARNING' && pos.dangerLevel === 'CRITICAL') {
          showToast(`‚ö†Ô∏è Upgraded to CRITICAL: ${pos.coin} ${pos.direction}`, 'critical');
        }
        
        previousPositions.set(key, { ...pos });
      });
    }

    function renderPositionCard(pos, idx, type) {
      const whaleIcon = pos.isProfitableWhale ? 'üí∞' : 'üé∞';
      const whaleLabel = pos.isProfitableWhale ? 'Profitable' : 'Losing';
      const whaleClass = pos.isProfitableWhale ? 'profitable' : 'losing';
      
      return `
        <div class="position-card ${pos.dangerLevel.toLowerCase()}">
          <div class="position-top">
            <div class="position-address">
              <a href="${pos.hyperliquidUrl}" target="_blank">${pos.userShort}</a>
              ${pos.isNewAddress ? '<span class="new-badge">NEW</span>' : ''}
              <span class="whale-badge ${whaleClass}">${whaleIcon} ${whaleLabel}</span>
              ${pos.totalPositionCount > 1 ? `<span class="position-count-badge">${pos.totalPositionCount} pos</span>` : ''}
            </div>
            <div>
              <span class="danger-badge ${pos.dangerLevel.toLowerCase()}">${pos.dangerLevel}</span>
            </div>
          </div>
          
          ${pos.isNewAddress && pos.dangerLevel === 'CRITICAL' ? '<div class="insider-alert">üéØ Potential Insider/Gambler</div>' : ''}
          
          ${pos.totalUnrealizedPnl !== undefined ? `
            <div class="total-pnl ${pos.totalUnrealizedPnl >= 0 ? 'positive' : 'negative'}">
              Wallet Total PnL: ${pos.totalUnrealizedPnl >= 0 ? '+' : ''}${formatUSD(pos.totalUnrealizedPnl)}
            </div>
          ` : ''}
          
          <div class="position-middle">
            <div class="position-stat">
              <div class="position-stat-label">Coin</div>
              <div class="position-stat-value">${pos.coin}</div>
            </div>
            <div class="position-stat">
              <div class="position-stat-label">Size</div>
              <div class="position-stat-value">${formatUSD(pos.positionUSD)}</div>
            </div>
            <div class="position-stat">
              <div class="position-stat-label">Distance</div>
              <div class="position-stat-value" style="color: ${pos.dangerLevel === 'CRITICAL' ? 'var(--accent-red)' : 'var(--accent-yellow)'}">${pos.distancePercent}%</div>
            </div>
            <div class="position-stat">
              <div class="position-stat-label">Leverage</div>
              <div class="position-stat-value" style="color: var(--accent-purple)">${pos.leverage}x</div>
            </div>
            <div class="position-stat">
              <div class="position-stat-label">PnL</div>
              <div class="position-stat-value" style="color: ${pos.unrealizedPnl >= 0 ? 'var(--accent-green)' : 'var(--accent-red)'}">${pos.unrealizedPnl >= 0 ? '+' : ''}${formatUSD(pos.unrealizedPnl)}</div>
            </div>
            <div class="position-stat">
              <div class="position-stat-label">Wallet</div>
              <div class="position-stat-value">${pos.walletBalance ? formatUSD(pos.walletBalance) : 'N/A'}</div>
            </div>
          </div>
          
          <div class="position-bottom">
            <div class="position-prices">
              <span>E: <b>${formatPrice(pos.entryPrice)}</b></span>
              <span>M: <b>${formatPrice(pos.markPrice)}</b></span>
              <span style="color: var(--accent-red)">L: <b>${formatPrice(pos.liqPrice)}</b></span>
            </div>
            ${pos.otherPositions && pos.otherPositions.length > 0 ? `
              <button class="other-positions-toggle" onclick="toggleOtherPositions(${idx})">
                üìÇ ${pos.otherPositions.length} more ‚ñº
              </button>
            ` : ''}
          </div>
          
          ${pos.otherPositions && pos.otherPositions.length > 0 ? `
            <div class="other-positions-container" id="other-pos-${idx}">
              ${pos.otherPositions.map(op => `
                <div class="other-position-item">
                  <span class="other-pos-coin">${op.coin}</span>
                  <span class="other-pos-direction ${op.direction.toLowerCase()}">${op.direction}</span>
                  <span class="other-pos-size">${formatUSD(op.positionUSD)}</span>
                  <span class="other-pos-pnl ${op.unrealizedPnl >= 0 ? 'positive' : 'negative'}">
                    ${op.unrealizedPnl >= 0 ? '+' : ''}${formatUSD(op.unrealizedPnl)}
                  </span>
                  <span style="color: var(--accent-purple); font-size: 0.65rem;">${op.leverage}x</span>
                </div>
              `).join('')}
            </div>
          ` : ''}
        </div>
      `;
    }

    // Modal functions
    function openAddressModal() {
      document.getElementById('addressModal').classList.add('active');
      document.getElementById('newAddress').focus();
    }

    function closeAddressModal() {
      document.getElementById('addressModal').classList.remove('active');
      document.getElementById('newAddress').value = '';
    }

    async function addAddress() {
      const address = document.getElementById('newAddress').value.trim();
      if (!address.startsWith('0x') || address.length !== 42) {
        showToast('Invalid address format', 'warning');
        return;
      }

      try {
        const response = await fetch('/api/add-address', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ address })
        });
        
        if (response.ok) {
          showToast('Address added for tracking', 'info');
          closeAddressModal();
          refreshData();
        } else {
          showToast('Failed to add address', 'warning');
        }
      } catch (error) {
        showToast('Error adding address', 'warning');
      }
    }

    // Toast notifications
    function showToast(message, type = 'info') {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = message;
      container.appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100%)';
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    }

    // Refresh data
    async function refreshData() {
      const [posData, stats] = await Promise.all([
        fetchPositions(),
        fetchStats()
      ]);

      updateStats(stats);
      renderPositions(posData);
    }

    // Event listeners
    document.getElementById('minSizeFilter').addEventListener('change', refreshData);
    document.getElementById('maxDistanceFilter').addEventListener('change', refreshData);
    document.getElementById('dangerFilter').addEventListener('change', refreshData);
    document.getElementById('coinFilter').addEventListener('change', () => {
      // Re-render with current data
      fetchPositions().then(data => renderPositions(data));
    });

    // Close modal on click outside
    document.getElementById('addressModal').addEventListener('click', (e) => {
      if (e.target.classList.contains('modal-overlay')) {
        closeAddressModal();
      }
    });

    // ESC to close modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeAddressModal();
    });

    // Enter to submit in modal
    document.getElementById('newAddress').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') addAddress();
    });

    // Initial load
    refreshData();

    // Auto-refresh every 30 seconds
    setInterval(refreshData, 30000);

    // Toggle other positions
    function toggleOtherPositions(idx) {
      const container = document.getElementById(`other-pos-${idx}`);
      if (container) {
        container.classList.toggle('expanded');
        const btn = container.previousElementSibling;
        if (btn) {
          btn.innerHTML = container.classList.contains('expanded') 
            ? btn.innerHTML.replace('‚ñº', '‚ñ≤')
            : btn.innerHTML.replace('‚ñ≤', '‚ñº');
        }
      }
    }

    // ============================================
    // LIQUIDATIONS
    // ============================================
    let currentLiqFilter = 'all';

    async function fetchLiquidations() {
      const minValue = currentLiqFilter === 'all' ? 0 : parseInt(currentLiqFilter);
      try {
        const response = await fetch(`/api/liquidations?minValue=${minValue}&limit=50`);
        return await response.json();
      } catch (error) {
        console.error('Error fetching liquidations:', error);
        return { liquidations: [], longValue: 0, shortValue: 0 };
      }
    }

    function formatTimeAgo(timestamp) {
      const seconds = Math.floor((Date.now() - timestamp) / 1000);
      if (seconds < 60) return `${seconds}s ago`;
      const minutes = Math.floor(seconds / 60);
      if (minutes < 60) return `${minutes}m ago`;
      const hours = Math.floor(minutes / 60);
      return `${hours}h ago`;
    }

    function renderLiquidations(data) {
      const list = document.getElementById('liqList');
      
      // Update stats
      document.getElementById('liqLongValue').textContent = formatUSD(data.longValue || 0);
      document.getElementById('liqShortValue').textContent = formatUSD(data.shortValue || 0);
      
      if (!data.liquidations || data.liquidations.length === 0) {
        list.innerHTML = '<div class="liq-empty">üíÄ Waiting for liquidations...</div>';
        return;
      }
      
      list.innerHTML = data.liquidations.map(liq => `
        <div class="liq-item">
          <div class="liq-side ${liq.side.toLowerCase()}"></div>
          <div class="liq-info">
            <div class="liq-coin">
              ${liq.coin}
              <span class="liq-direction ${liq.side.toLowerCase()}">${liq.side}</span>
            </div>
            <div class="liq-details">@ $${formatPrice(liq.price)}</div>
          </div>
          <div class="liq-value">
            <div class="liq-amount">${formatUSD(liq.value)}</div>
            <div class="liq-time">${formatTimeAgo(liq.timestamp)}</div>
          </div>
        </div>
      `).join('');
    }

    // Liq filter buttons
    document.querySelectorAll('.liq-filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.liq-filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLiqFilter = btn.dataset.filter;
        refreshLiquidations();
      });
    });

    async function refreshLiquidations() {
      const data = await fetchLiquidations();
      renderLiquidations(data);
      
      // Also fetch whale liquidations
      const whaleData = await fetchWhaleLiquidations();
      renderWhaleLiquidations(whaleData);
    }

    async function fetchWhaleLiquidations() {
      try {
        const response = await fetch('/api/whale-liquidations?limit=10');
        return await response.json();
      } catch (error) {
        console.error('Error fetching whale liquidations:', error);
        return { liquidations: [] };
      }
    }

    function renderWhaleLiquidations(data) {
      const list = document.getElementById('whaleLiqList');
      
      if (!data.liquidations || data.liquidations.length === 0) {
        list.innerHTML = '<div class="liq-empty">üêã No whale liquidations yet...</div>';
        return;
      }
      
      list.innerHTML = data.liquidations.map(liq => `
        <div class="whale-liq-item">
          <div class="liq-side ${liq.side.toLowerCase()}"></div>
          <div class="liq-info">
            <div class="liq-coin">
              ${liq.coin}
              <span class="liq-direction ${liq.side.toLowerCase()}">${liq.side}</span>
            </div>
            <div class="liq-details">@ $${formatPrice(liq.price)}</div>
          </div>
          <div class="liq-value">
            <div class="liq-amount">${formatUSD(liq.value)}</div>
            <div class="liq-time">${formatTimeAgo(liq.timestamp)}</div>
          </div>
        </div>
      `).join('');
    }

    // Update refreshData to include liquidations
    async function refreshDataWithLiqs() {
      await Promise.all([refreshData(), refreshLiquidations()]);
    }

    // Initial load with liquidations
    refreshLiquidations();
    
    // Auto-refresh liquidations every 3 seconds (daha hƒ±zlƒ±)
    setInterval(refreshLiquidations, 3000);
  </script>
</body>
</html>
